<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support Card Search</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .description {
            color: #7f8c8d;
            max-width: 800px;
            margin: 0 auto;
        }

        .search-section {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
        }

        .search-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .search-title {
            font-size: 1.2rem;
            color: #2c3e50;
        }

        .add-search-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .add-search-btn:hover {
            background: #2980b9;
        }

        .search-boxes {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .search-box {
            display: flex;
            gap: 10px;
        }

        .search-input {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }

        .remove-search-btn {
            background: #e74c3c;
            color: white;
            border: none;
            width: 40px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.2rem;
        }

        .remove-search-btn:hover {
            background: #c0392b;
        }

        .cards-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .card-header {
            background: #2c3e50;
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-name {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .card-type {
            background: #3498db;
            padding: 3px 8px;
            border-radius: 15px;
            font-size: 0.8rem;
        }

        .card-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .card-skills {
            padding: 15px;
        }

        .skill-section {
            margin-bottom: 15px;
        }

        .skill-section:last-child {
            margin-bottom: 0;
        }

        .skill-header {
            font-weight: bold;
            color: #3498db;
            margin-bottom: 8px;
            padding-bottom: 5px;
            border-bottom: 1px solid #eee;
        }

        .skill-list {
            list-style-type: none;
        }

        .skill-item {
            padding: 8px 10px;
            margin-bottom: 5px;
            border-radius: 5px;
            background: #f8f9fa;
            transition: background 0.2s;
        }

        .skill-item:hover {
            background: #e9ecef;
        }

        .highlighted {
            background: #fff3cd;
            border-left: 3px solid #ffc107;
        }

        .no-results {
            grid-column: 1 / -1;
            text-align: center;
            padding: 40px;
            color: #7f8c8d;
            font-size: 1.1rem;
        }

        .hidden {
            display: none;
        }

        .instructions {
            background: #e8f4fd;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            border-left: 4px solid #3498db;
        }

        .instructions h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .instructions ul {
            padding-left: 20px;
        }

        .instructions li {
            margin-bottom: 8px;
        }

        @media (max-width: 768px) {
            .cards-container {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }

            .search-box {
                flex-direction: column;
            }

            .remove-search-btn {
                width: 100%;
                padding: 10px;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>Support Card Search</h1>
            <p class="description">Search for cards by skill names or character names. Skills are hidden until searched.
            </p>
        </header>

        <section class="search-section">
            <div class="search-header">
                <h2 class="search-title">Search Terms</h2>
                <button class="add-search-btn" id="add-search-btn">
                    <span>+</span> Add Search Box
                </button>
            </div>
            <div class="search-boxes" id="search-boxes">
                <div class="search-box">
                    <input type="text" class="search-input" placeholder="Enter skill name or character name...">
                    <button class="remove-search-btn" disabled>×</button>
                </div>
            </div>
        </section>

        <div class="instructions">
            <h3>How to Use</h3>
            <ul>
                <li>Enter skill names (e.g., "Straightaway Spurt") or character names (e.g., "Tokai Teio")</li>
                <li>Add multiple search boxes to find cards with any of the entered skills</li>
                <li>Matching skills will be highlighted and shown with their respective headers</li>
                <li>Cards without matching skills will have their skills hidden</li>
            </ul>
        </div>

        <div class="cards-container" id="cards-container">
            <!-- Cards will be dynamically inserted here -->
        </div>
    </div>

    <script>
        // Sample data - in a real application, this would come from an API or JSON file
        const supportCards = [
            {
                id: 1,
                name: "Tokai Teio",
                type: "Speed",
                image: "https://via.placeholder.com/300x200/3498db/ffffff?text=Tokai+Teio",
                skills: {
                    "Event Skills": ["Straightaway Spurt", "Last Corner", "Final Sprint"],
                    "Hint Skills": ["On Your Left", "Speed Up", "Endurance Boost"]
                }
            },
            {
                id: 2,
                name: "Symboli Rudolf",
                type: "Stamina",
                image: "https://via.placeholder.com/300x200/2ecc71/ffffff?text=Symboli+Rudolf",
                skills: {
                    "Event Skills": ["Pace Control", "Stamina Recovery", "Final Effort"],
                    "Hint Skills": ["On Your Left", "Stamina Boost", "Positioning"]
                }
            },
            {
                id: 3,
                name: "Oguri Cap",
                type: "Power",
                image: "https://via.placeholder.com/300x200/e74c3c/ffffff?text=Oguri+Cap",
                skills: {
                    "Event Skills": ["Power Surge", "Hill Climb", "Final Sprint"],
                    "Hint Skills": ["Power Up", "Guts", "On Your Left"]
                }
            },
            {
                id: 4,
                name: "Gold Ship",
                type: "Friend",
                image: "https://via.placeholder.com/300x200/f39c12/ffffff?text=Gold+Ship",
                skills: {
                    "Event Skills": ["Unique Move", "Surprise Attack", "Final Effort"],
                    "Hint Skills": ["Intelligence Up", "Positioning", "Speed Up"]
                }
            },
            {
                id: 5,
                name: "Special Week",
                type: "Guts",
                image: "https://via.placeholder.com/300x200/9b59b6/ffffff?text=Special+Week",
                skills: {
                    "Event Skills": ["Gutsy Move", "Final Sprint", "Last Corner"],
                    "Hint Skills": ["Guts Up", "Stamina Recovery", "On Your Left"]
                }
            },
            {
                id: 6,
                name: "Silence Suzuka",
                type: "Intelligence",
                image: "https://via.placeholder.com/300x200/1abc9c/ffffff?text=Silence+Suzuka",
                skills: {
                    "Event Skills": ["Strategy", "Positioning", "Final Effort"],
                    "Hint Skills": ["Intelligence Up", "Speed Up", "On Your Left"]
                }
            }
        ];

        // DOM elements
        const searchBoxesContainer = document.getElementById('search-boxes');
        const addSearchBtn = document.getElementById('add-search-btn');
        const cardsContainer = document.getElementById('cards-container');

        // Initialize with one search box
        let searchTerms = [''];

        // Add event listeners
        addSearchBtn.addEventListener('click', addSearchBox);

        // Render initial cards (all skills hidden)
        renderCards();

        // Function to add a new search box
        function addSearchBox() {
            const searchBox = document.createElement('div');
            searchBox.className = 'search-box';
            searchBox.innerHTML = `
                <input type="text" class="search-input" placeholder="Enter skill name or character name...">
                <button class="remove-search-btn">×</button>
            `;

            searchBoxesContainer.appendChild(searchBox);

            // Enable remove button for all but the first search box
            updateRemoveButtons();

            // Add event listener to the new input
            const input = searchBox.querySelector('.search-input');
            input.addEventListener('input', handleSearch);

            // Add event listener to the remove button
            const removeBtn = searchBox.querySelector('.remove-search-btn');
            removeBtn.addEventListener('click', function () {
                searchBox.remove();
                updateRemoveButtons();
                updateSearchTerms();
                filterAndRenderCards();
            });
        }

        // Function to update the state of remove buttons
        function updateRemoveButtons() {
            const searchBoxes = document.querySelectorAll('.search-box');
            searchBoxes.forEach((box, index) => {
                const removeBtn = box.querySelector('.remove-search-btn');
                removeBtn.disabled = index === 0;
            });
        }

        // Function to handle search input
        function handleSearch(e) {
            updateSearchTerms();
            filterAndRenderCards();
        }

        // Function to update search terms from inputs
        function updateSearchTerms() {
            const inputs = document.querySelectorAll('.search-input');
            searchTerms = Array.from(inputs).map(input => input.value.trim().toLowerCase());
        }

        // Function to filter cards based on search terms and render them
        function filterAndRenderCards() {
            const activeSearchTerms = searchTerms.filter(term => term.length > 0);

            if (activeSearchTerms.length === 0) {
                // No active search terms, show all cards with skills hidden
                renderCards();
                return;
            }

            // Filter cards that match any of the search terms
            const filteredCards = supportCards.filter(card => {
                // Check if card name matches any search term
                if (activeSearchTerms.some(term =>
                    card.name.toLowerCase().includes(term))) {
                    return true;
                }

                // Check if any skill matches any search term
                for (const category in card.skills) {
                    if (card.skills[category].some(skill =>
                        activeSearchTerms.some(term =>
                            skill.toLowerCase().includes(term)))) {
                        return true;
                    }
                }

                return false;
            });

            renderCards(filteredCards, activeSearchTerms);
        }

        // Function to render cards
        function renderCards(cardsToRender = supportCards, searchTerms = []) {
            cardsContainer.innerHTML = '';

            if (cardsToRender.length === 0) {
                cardsContainer.innerHTML = '<div class="no-results">No cards match your search criteria.</div>';
                return;
            }

            cardsToRender.forEach(card => {
                const cardElement = document.createElement('div');
                cardElement.className = 'card';

                // Determine which skill categories have matches
                const matchingCategories = {};
                let hasMatches = false;

                if (searchTerms.length > 0) {
                    for (const category in card.skills) {
                        matchingCategories[category] = card.skills[category].filter(skill =>
                            searchTerms.some(term => skill.toLowerCase().includes(term))
                        );
                        if (matchingCategories[category].length > 0) {
                            hasMatches = true;
                        }
                    }
                }

                // Build skills HTML - only show categories with matches or if no search terms
                let skillsHTML = '';

                if (searchTerms.length === 0) {
                    // No search terms, hide all skills
                    skillsHTML = '<div class="skill-section"><p>Skills hidden - enter a search term to reveal skills</p></div>';
                } else {
                    // Show only categories with matching skills
                    for (const category in card.skills) {
                        if (matchingCategories[category].length > 0) {
                            skillsHTML += `
                                <div class="skill-section">
                                    <div class="skill-header">${category}</div>
                                    <ul class="skill-list">
                                        ${card.skills[category].map(skill => {
                                const isHighlighted = searchTerms.some(term =>
                                    skill.toLowerCase().includes(term));
                                return `<li class="skill-item ${isHighlighted ? 'highlighted' : ''}">${skill}</li>`;
                            }).join('')}
                                    </ul>
                                </div>
                            `;
                        }
                    }

                    // If no skills match but card name does, show a message
                    if (!hasMatches && searchTerms.some(term => card.name.toLowerCase().includes(term))) {
                        skillsHTML = '<div class="skill-section"><p>No matching skills found for this card</p></div>';
                    }
                }

                cardElement.innerHTML = `
                    <div class="card-header">
                        <div class="card-name">${card.name}</div>
                        <div class="card-type">${card.type}</div>
                    </div>
                    <img src="${card.image}" alt="${card.name}" class="card-image">
                    <div class="card-skills">
                        ${skillsHTML}
                    </div>
                `;

                cardsContainer.appendChild(cardElement);
            });
        }

        // Add event listeners to initial search input
        document.querySelector('.search-input').addEventListener('input', handleSearch);
    </script>
</body>

</html>